
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AGRO CYCLE - Results</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* Reset and base styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      border-color: #ebedf0;
    }

    html {
      scroll-behavior: smooth;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: #fafaf9;
      color: #1f1e1c;
      line-height: 1.6;
    }

    /* Custom variables */
    :root {
      --agro-green: #7CB342;
      --agro-green-dark: #558B2F;
      --agro-green-light: #C5E1A5;
      --agro-blue: #64B5F6;
      --agro-blue-dark: #1E88E5;
      --agro-blue-light: #BBDEFB;
      --agro-earth: #8D6E63;
      --agro-earth-dark: #4E342E;
      --agro-earth-light: #D7CCC8;
      --border-color: #ebedf0;
      --border-radius: 0.75rem;
    }

    /* Layout */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Typography */
    h1, h2, h3, h4, h5, h6 {
      font-weight: 600;
      line-height: 1.2;
      margin-bottom: 0.5em;
    }

    h1 {
      font-size: 2.5rem;
    }

    h2 {
      font-size: 2rem;
    }

    p {
      margin-bottom: 1rem;
    }

    /* Navbar */
    .navbar {
      background-color: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      padding: 1rem 0;
      z-index: 1000;
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.05);
    }

    .navbar-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: 700;
      background: linear-gradient(to right, var(--agro-green), var(--agro-blue-dark));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      list-style: none;
    }

    .nav-links li {
      margin-left: 2rem;
    }

    .nav-links a {
      color: var(--agro-earth);
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s;
    }

    .nav-links a:hover, .nav-links a.active {
      color: var(--agro-green);
    }

    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--agro-earth);
      cursor: pointer;
    }

    /* Hero section */
    .hero {
      padding-top: 8rem;
      padding-bottom: 4rem;
      background: linear-gradient(to bottom, rgba(187, 222, 251, 0.2), transparent);
      text-align: center;
    }

    .section-heading {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--agro-earth-dark);
    }

    .section-subheading {
      font-size: 1.2rem;
      font-weight: 500;
      color: rgba(141, 110, 99, 0.9);
      max-width: 36rem;
      margin: 0.5rem auto 0;
    }

    /* Results section */
    .results-section {
      padding: 3rem 0;
    }

    .results-container {
      max-width: 900px;
      margin: 0 auto;
    }

    .results-card {
      background-color: #fff;
      border-radius: 1rem;
      padding: 1.5rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      margin-bottom: 2.5rem;
      transition: all 0.3s;
    }

    .results-card:hover {
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }

    .confidence-chip {
      background-color: rgba(100, 181, 246, 0.3);
      color: var(--agro-blue-dark);
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 500;
    }

    .results-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    @media (min-width: 768px) {
      .results-grid {
        grid-template-columns: 1fr 1fr;
      }
    }

    .data-label {
      font-size: 0.875rem;
      color: var(--agro-earth);
      margin-bottom: 0.25rem;
    }

    .prediction-container {
      margin-bottom: 2rem;
    }

    .prediction-value {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--agro-green-dark);
      display: flex;
      align-items: baseline;
      gap: 0.5rem;
    }

    .prediction-unit {
      font-size: 1rem;
      color: var(--agro-earth);
    }

    .prediction-range {
      font-size: 0.875rem;
      color: var(--agro-earth);
      margin-top: 0.25rem;
    }

    .quality-badge {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
    }

    .quality-excellent {
      color: #2E7D32;
    }

    .quality-good {
      color: var(--agro-green);
    }

    .quality-average {
      color: #FF9800;
    }

    .quality-below {
      color: #D32F2F;
    }

    .crop-value {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--agro-earth-dark);
    }

    .factors-container {
      background: linear-gradient(to bottom right, rgba(197, 225, 165, 0.2), rgba(187, 222, 251, 0.2));
      padding: 1.5rem;
      border-radius: 0.75rem;
    }

    .factors-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--agro-earth-dark);
      margin-bottom: 0.75rem;
    }

    .factors-list {
      list-style: none;
      margin-bottom: 1.5rem;
    }

    .factors-list li {
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
      color: var(--agro-earth-dark);
    }

    .factors-list li svg {
      min-width: 20px;
      margin-top: 3px;
    }

    .input-summary-card {
      margin-top: 2.5rem;
    }

    .input-summary-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    @media (min-width: 768px) {
      .input-summary-grid {
        grid-template-columns: 1fr 1fr 1fr;
      }
    }

    .input-data-group h3 {
      font-size: 1.125rem;
      font-weight: 500;
      color: var(--agro-earth-dark);
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .input-data-list {
      list-style: none;
    }

    .input-data-list li {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
    }

    .input-name {
      font-size: 0.875rem;
      color: var(--agro-earth);
    }

    .input-value {
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--agro-earth-dark);
    }

    .action-buttons {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 2.5rem;
    }

    @media (min-width: 640px) {
      .action-buttons {
        flex-direction: row;
        justify-content: center;
      }
    }

    .btn {
      padding: 0.75rem 1.5rem;
      border-radius: 0.75rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .btn-primary {
      background-color: var(--agro-green);
      color: white;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .btn-primary:hover {
      background-color: var(--agro-green-dark);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .btn-secondary {
      background-color: rgba(197, 225, 165, 0.7);
      color: var(--agro-green-dark);
    }

    .btn-secondary:hover {
      background-color: var(--agro-green-light);
    }

    .btn-icon {
      margin-left: 0.5rem;
    }

    .loader-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 3rem 0;
    }

    .loader {
      width: 48px;
      height: 48px;
      border: 5px solid var(--agro-green);
      border-bottom-color: transparent;
      border-radius: 50%;
      display: inline-block;
      box-sizing: border-box;
      animation: loader 1s linear infinite;
      margin-bottom: 1rem;
    }

    @keyframes loader {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }

    .no-data-container {
      text-align: center;
      padding: 3rem 0;
    }

    .no-data-icon {
      font-size: 4rem;
      color: rgba(141, 110, 99, 0.5);
      margin-bottom: 1rem;
    }

    .no-data-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--agro-earth-dark);
      margin-bottom: 0.5rem;
    }

    .no-data-message {
      color: var(--agro-earth);
      margin-bottom: 1.5rem;
    }

    /* Footer */
    .footer {
      background-color: #f7f5f2;
      padding: 3rem 0;
      border-top: 1px solid var(--border-color);
    }

    .footer-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    @media (min-width: 768px) {
      .footer-grid {
        grid-template-columns: 1fr 1fr 1fr;
      }
    }

    .footer-heading {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--agro-earth-dark);
    }

    .footer-list {
      list-style: none;
    }

    .footer-list li {
      margin-bottom: 0.5rem;
    }

    .footer-list a {
      color: var(--agro-earth);
      text-decoration: none;
      transition: color 0.3s;
    }

    .footer-list a:hover {
      color: var(--agro-green);
    }

    .footer-address {
      font-style: normal;
      color: var(--agro-earth);
    }

    .footer-address p {
      margin-bottom: 0.25rem;
    }

    .footer-address a {
      color: var(--agro-earth);
      text-decoration: none;
      transition: color 0.3s;
    }

    .footer-address a:hover {
      color: var(--agro-green);
    }

    .footer-bottom {
      margin-top: 2rem;
      padding-top: 2rem;
      border-top: 1px solid rgba(141, 110, 99, 0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    @media (min-width: 768px) {
      .footer-bottom {
        flex-direction: row;
        justify-content: space-between;
      }
    }

    .footer-bottom p {
      color: var(--agro-earth);
      font-size: 0.875rem;
      margin-bottom: 0.5rem;
    }

    @media (min-width: 768px) {
      .footer-bottom p {
        margin-bottom: 0;
      }
    }

    /* Animation */
    .reveal {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.8s ease;
    }

    .reveal.active {
      opacity: 1;
      transform: translateY(0);
    }

    /* Toast notifications */
    .toast-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 9999;
    }

    .toast {
      background-color: white;
      border-radius: 0.5rem;
      padding: 0.75rem 1rem;
      margin-bottom: 0.75rem;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      transform: translateX(120%);
      transition: transform 0.3s ease;
    }

    .toast.active {
      transform: translateX(0);
    }

    .toast-success {
      border-left: 4px solid var(--agro-green);
    }

    .toast-error {
      border-left: 4px solid #e53935;
    }

    .toast-info {
      border-left: 4px solid var(--agro-blue);
    }

    .toast-icon {
      margin-right: 0.5rem;
      display: flex;
    }

    .toast-content {
      flex: 1;
    }

    .toast-title {
      font-weight: 600;
      font-size: 0.875rem;
      margin-bottom: 0.125rem;
    }

    .toast-description {
      font-size: 0.75rem;
      color: var(--agro-earth);
    }

    .toast-close {
      background: none;
      border: none;
      color: #9e9e9e;
      cursor: pointer;
      font-size: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Media Queries */
    @media (max-width: 768px) {
      .nav-links {
        display: none;
        flex-direction: column;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background-color: white;
        padding: 1rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .nav-links.active {
        display: flex;
      }

      .nav-links li {
        margin: 0.5rem 0;
        margin-left: 0;
      }

      .mobile-menu-btn {
        display: block;
      }

      .section-heading {
        font-size: 2rem;
      }

      .section-subheading {
        font-size: 1rem;
      }
    }

    /* Delay animations */
    .delay-1 { transition-delay: 0.1s; }
    .delay-2 { transition-delay: 0.2s; }
    .delay-3 { transition-delay: 0.3s; }
    .delay-4 { transition-delay: 0.4s; }
    .delay-5 { transition-delay: 0.5s; }
  </style>
</head>
<body>
  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="container navbar-container">
      <a href="index.html" class="logo">AGRO CYCLE</a>
      <button class="mobile-menu-btn" id="mobileMenuBtn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
      <ul class="nav-links" id="navLinks">
        <li><a href="index.html">Home</a></li>
        <li><a href="data-input.html">Data Input</a></li>
        <li><a href="results.html" class="active">Results</a></li>
        <li><a href="insights.html">Insights</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <h1 class="section-heading reveal">Prediction Results</h1>
      <p class="section-subheading reveal delay-1">
        Based on your input data, our machine learning model has generated the following yield predictions.
      </p>
    </div>
  </section>

  <!-- Results Section -->
  <section class="results-section">
    <div class="container results-container">
      <div id="loadingContainer" class="loader-container">
        <span class="loader"></span>
        <p class="text-agro-earth">Generating your prediction...</p>
      </div>

      <div id="noDataContainer" class="no-data-container" style="display: none;">
        <div class="no-data-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
        </div>
        <h2 class="no-data-title">No Data Available</h2>
        <p class="no-data-message">Please input your crop data before viewing results.</p>
        <a href="data-input.html" class="btn btn-primary">
          Go to Data Input
        </a>
      </div>

      <div id="resultsContainer" style="display: none;">
        <!-- Prediction Summary -->
        <div class="results-card reveal">
          <div class="card-header">
            <h2>Prediction Summary</h2>
            <span id="confidenceLevel" class="confidence-chip">95% Confidence</span>
          </div>
          
          <div class="results-grid">
            <div>
              <div class="prediction-container">
                <p class="data-label">Predicted Yield</p>
                <div class="prediction-value">
                  <span id="predictedYield">5,240</span>
                  <span class="prediction-unit">kg/ha</span>
                </div>
                <p id="yieldRange" class="prediction-range">
                  Range: 4,980 - 5,500 kg/ha
                </p>
              </div>
              
              <div>
                <p class="data-label">Yield Quality</p>
                <p id="yieldQuality" class="quality-badge quality-good">
                  Good
                </p>
              </div>
              
              <div>
                <p class="data-label">Crop Type</p>
                <p id="cropType" class="crop-value">
                  Rice
                </p>
              </div>
            </div>
            
            <div class="factors-container">
              <h3 class="factors-title">Risk Factors</h3>
              <ul id="riskFactorsList" class="factors-list">
                <li>
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#FF9800" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                    <line x1="12" y1="9" x2="12" y2="13"></line>
                    <line x1="12" y1="17" x2="12.01" y2="17"></line>
                  </svg>
                  <span>Suboptimal temperature</span>
                </li>
              </ul>
              
              <h3 class="factors-title">Recommendations</h3>
              <ul id="recommendationsList" class="factors-list">
                <li>
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#64B5F6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 16v-4"></path>
                    <path d="M12 8h.01"></path>
                  </svg>
                  <span>Consider shade management or alternative cooling strategies</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
        
        <!-- Input Summary -->
        <div class="results-card input-summary-card reveal delay-2">
          <h2>Your Input Data</h2>
          
          <div class="input-summary-grid">
            <!-- Weather Data -->
            <div class="input-data-group">
              <h3>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#64B5F6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"></path>
                </svg>
                Weather
              </h3>
              <ul id="weatherDataList" class="input-data-list">
                <li>
                  <span class="input-name">Temperature:</span>
                  <span class="input-value">25°C</span>
                </li>
                <li>
                  <span class="input-name">Rainfall:</span>
                  <span class="input-value">150 mm</span>
                </li>
                <li>
                  <span class="input-name">Humidity:</span>
                  <span class="input-value">65%</span>
                </li>
                <li>
                  <span class="input-name">Wind Speed:</span>
                  <span class="input-value">10 km/h</span>
                </li>
              </ul>
            </div>
            
            <!-- Soil Data -->
            <div class="input-data-group">
              <h3>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#8D6E63" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="m2 22 1-1h3l9-9"></path>
                  <path d="M3 21v-3l9-9"></path>
                </svg>
                Soil
              </h3>
              <ul id="soilDataList" class="input-data-list">
                <li>
                  <span class="input-name">pH Level:</span>
                  <span class="input-value">6.5</span>
                </li>
                <li>
                  <span class="input-name">Nitrogen:</span>
                  <span class="input-value">120 kg/ha</span>
                </li>
                <li>
                  <span class="input-name">Phosphorus:</span>
                  <span class="input-value">45 kg/ha</span>
                </li>
                <li>
                  <span class="input-name">Potassium:</span>
                  <span class="input-value">80 kg/ha</span>
                </li>
              </ul>
            </div>
            
            <!-- Crop Data -->
            <div class="input-data-group">
              <h3>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#7CB342" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 11V2a10 10 0 0 0-5 18.66"></path>
                  <path d="M12 11V2a10 10 0 0 1 5 18.66"></path>
                  <path d="M12 11a12.1 12.1 0 0 1 10 3"></path>
                  <path d="M12 11a12.1 12.1 0 0 0-10 3"></path>
                </svg>
                Crop
              </h3>
              <ul id="cropDataList" class="input-data-list">
                <li>
                  <span class="input-name">Type:</span>
                  <span class="input-value">Rice</span>
                </li>
                <li>
                  <span class="input-name">Growth Stage:</span>
                  <span class="input-value">Vegetative</span>
                </li>
                <li>
                  <span class="input-name">Previous Yield:</span>
                  <span class="input-value">4,800 kg/ha</span>
                </li>
                <li>
                  <span class="input-name">Planting Date:</span>
                  <span class="input-value">2023-06-15</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="action-buttons reveal delay-3">
          <a href="insights.html" class="btn btn-primary">
            View Detailed Insights
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon">
              <path d="M5 12h14"></path>
              <path d="m12 5 7 7-7 7"></path>
            </svg>
          </a>
          
          <a href="data-input.html" class="btn btn-secondary">
            Modify Input Data
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <!-- Logo and Description -->
        <div>
          <a href="index.html" class="logo">AGRO CYCLE</a>
          <p class="footer-description" style="color: var(--agro-earth); max-width: 300px; margin-top: 1rem">
            Advanced crop yield prediction platform using machine learning to enhance agricultural productivity and sustainability.
          </p>
        </div>

        <!-- Quick Links -->
        <div>
          <h3 class="footer-heading">Quick Links</h3>
          <ul class="footer-list">
            <li><a href="index.html">Home</a></li>
            <li><a href="data-input.html">Data Input</a></li>
            <li><a href="results.html">Results</a></li>
            <li><a href="insights.html">Insights</a></li>
            <li><a href="about.html">About</a></li>
          </ul>
        </div>

        <!-- Contact Information -->
        <div>
          <h3 class="footer-heading">Contact Us</h3>
          <address class="footer-address">
            <p>GM University</p>
            <p>P.B. Road, Davanagere</p>
            <p>Davangere - 577006</p>
            <p>Karnataka</p>
            <p style="margin-top: 1rem">
              <a href="mailto:info@gmu.ac.in">info@gmu.ac.in</a>
            </p>
            <p>
              <a href="tel:+916361219778">+91 6361 219 778</a>
            </p>
          </address>
        </div>
      </div>

      <div class="footer-bottom">
        <p>© <span id="currentYear"></span> AGRO CYCLE. All rights reserved.</p>
        <p>Designed & Developed by <span style="font-weight: 500; color: var(--agro-green-dark)">RAJN TEAM</span></p>
      </div>
    </div>
  </footer>

  <script>
    // Current year for footer copyright
    document.getElementById('currentYear').textContent = new Date().getFullYear();

    // Mobile menu toggle
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const navLinks = document.getElementById('navLinks');

    mobileMenuBtn.addEventListener('click', () => {
      navLinks.classList.toggle('active');
    });

    // Reveal animation on scroll
    function reveal() {
      const reveals = document.querySelectorAll('.reveal');
      
      for (let i = 0; i < reveals.length; i++) {
        const windowHeight = window.innerHeight;
        const elementTop = reveals[i].getBoundingClientRect().top;
        const elementVisible = 150;
        
        if (elementTop < windowHeight - elementVisible) {
          reveals[i].classList.add('active');
        }
      }
    }

    window.addEventListener('scroll', reveal);
    reveal(); // Trigger on page load

    // Toast Notification System
    const toastContainer = document.getElementById('toastContainer');

    function showToast(type, title, message) {
      const toast = document.createElement('div');
      toast.className = `toast toast-${type}`;

      let iconSvg = '';
      if (type === 'success') {
        iconSvg = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#7CB342" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>';
      } else if (type === 'error') {
        iconSvg = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#e53935" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>';
      } else {
        iconSvg = '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#64B5F6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>';
      }

      toast.innerHTML = `
        <div class="toast-icon">${iconSvg}</div>
        <div class="toast-content">
          <div class="toast-title">${title}</div>
          <div class="toast-description">${message}</div>
        </div>
        <button class="toast-close">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      `;

      toastContainer.appendChild(toast);
      
      // Trigger reflow to enable transitions
      toast.offsetHeight;
      
      // Show toast
      setTimeout(() => {
        toast.classList.add('active');
      }, 10);

      // Auto remove after 5 seconds
      setTimeout(() => {
        removeToast(toast);
      }, 5000);

      // Close button event
      const closeBtn = toast.querySelector('.toast-close');
      closeBtn.addEventListener('click', () => {
        removeToast(toast);
      });
    }

    function removeToast(toast) {
      toast.classList.remove('active');
      
      // Wait for transition to finish before removing
      setTimeout(() => {
        toast.remove();
      }, 300);
    }

    // Mock prediction function (similar to the React version)
    function generatePrediction(cropData) {
      // Calculate base yield based on crop type
      const baseYieldMap = {
        rice: 5000,
        wheat: 4500,
        maize: 6000,
        cotton: 2500,
        sugarcane: 80000,
        pulses: 1500,
        vegetables: 25000
      };
      
      const baseYield = baseYieldMap[cropData.cropType] || 4000;
      
      // Temperature factor (different crops have different optimal temperatures)
      const tempOptimal = {
        rice: 25,
        wheat: 20,
        maize: 27,
        cotton: 30,
        sugarcane: 28,
        pulses: 22,
        vegetables: 24
      };
      
      const tempFactor = 1 - Math.abs(Number(cropData.temperature) - (tempOptimal[cropData.cropType] || 25)) * 0.02;
      
      // Rainfall factor
      const rainfallFactor = Number(cropData.rainfall) > 0 ? 
        Math.min(Number(cropData.rainfall) / 200, 1.2) : 0.6;
      
      // Soil nutrient factor
      const nFactor = Math.min(Number(cropData.nitrogen) / 100, 1.3);
      const pFactor = Math.min(Number(cropData.phosphorus) / 50, 1.2);
      const kFactor = Math.min(Number(cropData.potassium) / 70, 1.1);
      
      // Calculate predicted yield
      let predictedYield = baseYield * tempFactor * rainfallFactor * nFactor * pFactor * kFactor;
      
      // Add random variation to make it seem more realistic
      predictedYield = predictedYield * (0.95 + Math.random() * 0.1);
      
      // Round to nearest 10
      predictedYield = Math.round(predictedYield / 10) * 10;
      
      // Calculate yield range (±5%)
      const lowerYield = Math.round(predictedYield * 0.95 / 10) * 10;
      const upperYield = Math.round(predictedYield * 1.05 / 10) * 10;
      
      // Calculate confidence level based on data completeness
      const dataPoints = Object.values(cropData).filter(v => v !== '').length;
      const confidencePercent = Math.min(60 + dataPoints * 3, 95);
      
      // Determine yield quality
      let yieldQuality = 'Average';
      if (predictedYield > baseYield * 1.1) {
        yieldQuality = 'Excellent';
      } else if (predictedYield > baseYield) {
        yieldQuality = 'Good';
      } else if (predictedYield < baseYield * 0.9) {
        yieldQuality = 'Below Average';
      }
      
      // Risk factors
      const riskFactors = [];
      if (tempFactor < 0.9) riskFactors.push('Suboptimal temperature');
      if (rainfallFactor < 0.8) riskFactors.push('Insufficient rainfall');
      if (nFactor < 0.9) riskFactors.push('Low nitrogen levels');
      if (pFactor < 0.9) riskFactors.push('Low phosphorus levels');
      if (kFactor < 0.9) riskFactors.push('Low potassium levels');
      
      // Recommendations
      const recommendations = [];
      if (tempFactor < 0.9) {
        if (Number(cropData.temperature) > tempOptimal[cropData.cropType]) {
          recommendations.push('Consider shade management or alternative cooling strategies');
        } else {
          recommendations.push('Consider greenhouse or protective structures to increase temperature');
        }
      }
      
      if (rainfallFactor < 0.8) recommendations.push('Implement proper irrigation system');
      if (nFactor < 0.9) recommendations.push('Increase nitrogen fertilization');
      if (pFactor < 0.9) recommendations.push('Apply phosphorus-rich fertilizers');
      if (kFactor < 0.9) recommendations.push('Supplement with potassium');
      
      return {
        predictedYield,
        yieldRange: { lower: lowerYield, upper: upperYield },
        confidenceLevel: confidencePercent,
        yieldQuality,
        riskFactors: riskFactors.length > 0 ? riskFactors : ['No significant risks identified'],
        recommendations: recommendations.length > 0 ? recommendations : ['Current farming practices are optimal']
      };
    }

    // Format number with commas
    function formatNumber(number) {
      return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    // Capitalize first letter of each word
    function capitalizeFirstLetter(string) {
      return string.charAt(0).toUpperCase() + string.slice(1);
    }

    // Helper for quality class
    function getQualityClass(quality) {
      switch (quality) {
        case 'Excellent':
          return 'quality-excellent';
        case 'Good':
          return 'quality-good';
        case 'Average':
          return 'quality-average';
        case 'Below Average':
          return 'quality-below';
        default:
          return 'quality-good';
      }
    }

    // Update the UI with crop data and prediction
    function updateUI(cropData, prediction) {
      // Update prediction summary
      document.getElementById('confidenceLevel').textContent = `${prediction.confidenceLevel}% Confidence`;
      document.getElementById('predictedYield').textContent = formatNumber(prediction.predictedYield);
      document.getElementById('yieldRange').textContent = `Range: ${formatNumber(prediction.yieldRange.lower)} - ${formatNumber(prediction.yieldRange.upper)} kg/ha`;
      
      const qualityElement = document.getElementById('yieldQuality');
      qualityElement.textContent = prediction.yieldQuality;
      qualityElement.className = `quality-badge ${getQualityClass(prediction.yieldQuality)}`;
      
      document.getElementById('cropType').textContent = capitalizeFirstLetter(cropData.cropType);

      // Update risk factors
      const riskFactorsList = document.getElementById('riskFactorsList');
      riskFactorsList.innerHTML = '';
      
      prediction.riskFactors.forEach(factor => {
        const li = document.createElement('li');
        
        if (factor === 'No significant risks identified') {
          li.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#7CB342" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
              <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
            <span>${factor}</span>
          `;
        } else {
          li.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#FF9800" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
              <line x1="12" y1="9" x2="12" y2="13"></line>
              <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
            <span>${factor}</span>
          `;
        }
        
        riskFactorsList.appendChild(li);
      });

      // Update recommendations
      const recommendationsList = document.getElementById('recommendationsList');
      recommendationsList.innerHTML = '';
      
      prediction.recommendations.forEach(rec => {
        const li = document.createElement('li');
        li.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#64B5F6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M12 16v-4"></path>
            <path d="M12 8h.01"></path>
          </svg>
          <span>${rec}</span>
        `;
        recommendationsList.appendChild(li);
      });

      // Update weather data
      const weatherDataList = document.getElementById('weatherDataList');
      weatherDataList.innerHTML = `
        <li>
          <span class="input-name">Temperature:</span>
          <span class="input-value">${cropData.temperature}°C</span>
        </li>
        <li>
          <span class="input-name">Rainfall:</span>
          <span class="input-value">${cropData.rainfall} mm</span>
        </li>
        <li>
          <span class="input-name">Humidity:</span>
          <span class="input-value">${cropData.humidity}%</span>
        </li>
        <li>
          <span class="input-name">Wind Speed:</span>
          <span class="input-value">${cropData.windSpeed || 'N/A'} km/h</span>
        </li>
      `;

      // Update soil data
      const soilDataList = document.getElementById('soilDataList');
      soilDataList.innerHTML = `
        <li>
          <span class="input-name">pH Level:</span>
          <span class="input-value">${cropData.soilPh}</span>
        </li>
        <li>
          <span class="input-name">Nitrogen:</span>
          <span class="input-value">${cropData.nitrogen} kg/ha</span>
        </li>
        <li>
          <span class="input-name">Phosphorus:</span>
          <span class="input-value">${cropData.phosphorus} kg/ha</span>
        </li>
        <li>
          <span class="input-name">Potassium:</span>
          <span class="input-value">${cropData.potassium} kg/ha</span>
        </li>
      `;

      // Update crop data
      const cropDataList = document.getElementById('cropDataList');
      cropDataList.innerHTML = `
        <li>
          <span class="input-name">Type:</span>
          <span class="input-value">${capitalizeFirstLetter(cropData.cropType)}</span>
        </li>
        <li>
          <span class="input-name">Growth Stage:</span>
          <span class="input-value">${cropData.growthStage ? capitalizeFirstLetter(cropData.growthStage) : 'N/A'}</span>
        </li>
        <li>
          <span class="input-name">Previous Yield:</span>
          <span class="input-value">${cropData.previousYield ? `${formatNumber(cropData.previousYield)} kg/ha` : 'N/A'}</span>
        </li>
        <li>
          <span class="input-name">Planting Date:</span>
          <span class="input-value">${cropData.plantingDate || 'N/A'}</span>
        </li>
      `;
    }

    // Main execution on page load
    document.addEventListener('DOMContentLoaded', () => {
      const loadingContainer = document.getElementById('loadingContainer');
      const noDataContainer = document.getElementById('noDataContainer');
      const resultsContainer = document.getElementById('resultsContainer');
      
      // Get crop data from localStorage
      const storedData = localStorage.getItem('cropData');
      
      setTimeout(() => {
        if (storedData) {
          const cropData = JSON.parse(storedData);
          
          // Generate prediction
          const prediction = generatePrediction(cropData);
          
          // Update UI with the data
          updateUI(cropData, prediction);
          
          // Show results
          loadingContainer.style.display = 'none';
          resultsContainer.style.display = 'block';
        } else {
          // No data found
          loadingContainer.style.display = 'none';
          noDataContainer.style.display = 'block';
          
          showToast('error', 'No crop data found', 'Please input data before viewing results.');
        }
      }, 1500); // Simulate loading delay
    });
  </script>
</body>
</html>
